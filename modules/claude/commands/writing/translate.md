---
description: 文章を指定した言語に翻訳
argument-hint: [言語コード] [翻訳対象のドキュメント or PATH]
allowed-tools: Read, Write, WebSearch, mcp__fetch__fetch
---

**コマンドコンテキスト**: 文章の多言語翻訳

次の内容を翻訳してください:

- **翻訳先言語**: $1
- **翻訳対象**: $2

---

## 翻訳基準（必ず参照）

### 翻訳品質基準

**自然さ**:

- ネイティブスピーカーが書いたような自然な表現
- 機械翻訳的な直訳を避ける
- 文化的なニュアンスを考慮

**正確性**:

- 原文の意味を正確に伝える
- 専門用語は適切に翻訳
- 固有名詞の扱いを適切に（必要に応じて原語を併記）

**一貫性**:

- 用語の統一
- トーンの維持
- スタイルの一貫性

**技術文書の翻訳**:

- コードブロック内のコメントも翻訳対象
- コマンド、関数名、変数名は翻訳しない
- 技術用語は一般的な訳語を使用（必要に応じて原語を併記）

### フロントマター処理

**保持する項目**:

- `title`: 翻訳する
- `description`: 翻訳する
- `tags`: 必要に応じて翻訳（技術タグは英語のまま推奨）
- `publishedAt`: そのまま保持
- `updatedAt`: 翻訳時の日時に更新

### 言語コード対応表

一般的な言語コード:

- `en`: 英語（English）
- `ja`: 日本語（Japanese）
- `zh-CN`: 中国語簡体字（Simplified Chinese）
- `zh-TW`: 中国語繁体字（Traditional Chinese）
- `ko`: 韓国語（Korean）
- `es`: スペイン語（Spanish）
- `fr`: フランス語（French）
- `de`: ドイツ語（German）
- `pt`: ポルトガル語（Portuguese）
- `ru`: ロシア語（Russian）

---

## 実行ステップ

**Think deeply** 以下のステップを順番に実行:

### ステップ 1: 入力解析と読み込み

```bash
# 引数が2つ指定されているか確認
# $1: 翻訳先言語コード
# $2: ファイルパスまたはドキュメント本文
```

**判定基準**:

- `$2` が `.md` を含む、または `/` を含む → ファイルパス
- 上記以外で長文 → ドキュメント本文
- 引数が不足している場合はエラーメッセージを表示

**ファイルパスの場合**:

- `Read` tool でファイルを読み込み
- ファイルの存在を確認
- 元のファイルパスを記録（後で保存先を決定するため）

**ドキュメント本文の場合**:

- そのまま翻訳処理に進む

### ステップ 2: 元の言語の検出

**コンテンツから自動検出**:

- 文字の種類（ひらがな、漢字、アルファベットなど）から推測
- 最初の数段落を分析して言語を判定

### ステップ 3: 用語の確認（オプション）

専門用語や固有名詞が含まれる場合:

**Web 検索による確認**:

```
WebSearch または mcp__fetch__fetch で用語の一般的な訳語を確認:
- "[専門用語] [翻訳先言語] translation"
- "[固有名詞] official [翻訳先言語] name"
```

**確認優先度**:

1. 高優先: 技術用語、製品名、サービス名
2. 中優先: 専門用語、業界用語
3. 低優先: 一般的な単語

### ステップ 4: 翻訳実行

**翻訳のポイント**:

1. **フロントマター**:

   - YAML 形式を保持
   - 必須項目を翻訳
   - 言語情報を追加/更新

2. **本文**:

   - 見出し階層を維持
   - コードブロックの言語指定を保持
   - リンクの URL はそのまま
   - コード内のコメントも翻訳

3. **マークダウン構文**:
   - すべてのマークダウン構文を保持
   - 改行とインデントを適切に維持

**翻訳例**:

```markdown
# 元の文書（日本語）

---

title: "Claude Code の使い方"
description: "Claude Code の基本的な使い方を解説"
tags: ["claude", "ai"]
publishedAt: "2025-01-14T00:00:00.000Z"

---

## はじめに

Claude Code は AI アシスタントです。

---

# 翻訳後（英語）

---

title: "How to Use Claude Code"
description: "A guide to the basics of using Claude Code"
tags: ["claude", "ai"]
publishedAt: "2025-01-14T00:00:00.000Z"
updatedAt: "2025-01-14T10:00:00.000Z"
originalLang: "ja"
translatedLang: "en"

---

## Introduction

Claude Code is an AI assistant.
```

### ステップ 5: 翻訳結果の出力

**ファイルパスが指定されていた場合**:

1. **出力ファイルパスの生成**:

   ```
   元のファイル: /path/to/article.md
   翻訳先言語: en
   出力ファイル: /path/to/article-en.md
   ```

   - 元のファイル名から拡張子を分離
   - ファイル名の末尾に `-言語コード` を追加
   - 拡張子を付加

2. **ファイル保存**:

   - `Write` tool を使用してファイルに保存

3. **保存後の確認**:
   ```
   ✅ 翻訳を保存しました: /path/to/article-en.md
   元のファイル: /path/to/article.md
   翻訳先言語: en (英語)
   ```

**ドキュメント本文の場合**:

- 翻訳結果をそのまま出力
- ファイルへの保存は行わない

### ステップ 6: 品質チェック（オプション）

翻訳後、以下をユーザーに提案:

```
翻訳が完了しました。以下のオプションがあります:

- 翻訳結果を確認する (show)
- 品質チェックを実行する (check) ※ /review コマンドを使用
- 完了 (done)
```

---

## 重要な注意事項

1. **言語コードの検証**: 不明な言語コードの場合は警告を表示
2. **ファイルの上書き防止**: 同名ファイルが存在する場合は確認を求める
3. **フロントマターの検証**: YAML 形式が壊れていないか確認
4. **専門用語の扱い**: 技術用語は無理に翻訳せず、原語を併記することも検討
5. **コードブロックの保護**: コード内の文字列やコメント以外は翻訳しない
6. **リンクの保持**: URL やアンカーリンクはそのまま保持

---

## 使用例

```bash
# ファイルを英語に翻訳して保存
/translate en contents/blogs/ja/article.md

# ドキュメント本文を日本語に翻訳
/translate ja "This is a sample document to translate."

# 中国語簡体字に翻訳
/translate zh-CN contents/blogs/en/tutorial.md
```

---

## エラーハンドリング

**引数不足**:

```
エラー: 引数が不足しています。

使用方法: /translate [言語コード] [翻訳対象]

例:
  /translate en article.md
  /translate ja "翻訳したい文章"
```

**ファイルが見つからない**:

```
エラー: ファイルが見つかりません: /path/to/file.md

ファイルパスを確認してください。
```

**不明な言語コード**:

```
警告: 不明な言語コード "$1" が指定されました。

一般的な言語コード: en, ja, zh-CN, ko, es, fr, de

続行しますか？ (y/n)
```
