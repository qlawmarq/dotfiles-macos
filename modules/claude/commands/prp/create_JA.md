---
description: ユーザーの要件をもとに実装可能な Product Requirement Prompt (PRP) を作成
category: prp
allowed-tools: Read, Write, Glob, Grep, Bash, WebFetch, Task
argument-hint: [機能の説明または要件]
disable-model-invocation: true
---

# PRP の作成

## 要件: $ARGUMENTS

## PRP 作成

あなたのタスクはユーザーの要件をもとに、実装可能なレベルのドキュメント、Product Requirement Prompt（PRP）を作成することです。

要件を明確に把握した上で、既存の実装を把握し、Web 検索や MCP を活用し具体的な実装案を考え、実装が開始できるレベルの仕様書（PRP）を作成します。

あなたの作成した仕様書（PRP）をもとに次の作業者が実際の実装を行うことになります。**つまり、PRP の品質が実際の実装内容を作業することになります。**調査した内容や文脈情報を全て含んだ包括的な仕様書（PRP）を作成してください。

## 調査プロセス

> 調査プロセスを通じて、要件を具体的で明確にし、迷うことなく実際の実装を開始できるレベルにするための情報収集を行ってください。必要な情報を全て余すことなく調査してください。

0. **要件の明確化**

   - 要件が曖昧な場合は必要に応じて要件を明確にする
   - 憶測での作業は絶対に禁止
   - 必要に応じて、ユーザーに積極的に質問や提案を行い、ユーザーの求めているものを深く理解する

1. **コードベース分析を深く**

   - プロジェクト構成を把握する
   - PRP で参照する必要のあるすべてのファイルを特定
   - 従うべき既存の規約をすべて記録
   - 検証アプローチのため既存のテストパターンや動作確認方法を確認
   - 必要に応じて、コードベースで類似機能/パターンを検索するサブエージェントを生成

1. **大規模な外部調査**

   - 要件を達成するために活用できる外部のライブラリをリストアップする
   - ライブラリドキュメントを調査する
   - 重要なドキュメント部分については、PRPs/ai_docs に.md ファイルを追加し、PRP で参照。明確な理由と指示を記述
   - 実装例（GitHub/StackOverflow/ブログ）
   - リサーチ中に見つけたベストプラクティスと一般的な落とし穴
   - 必要に応じて、類似機能/パターンをオンラインで検索し、ドキュメントや例への URL を含めるサブエージェントを生成

## PRP 生成プロセス

### ステップ 0: 調査

まず「調査プロセス」に従い、要件を満たすために必要な情報を調査してください。

### ステップ 1: コンテキスト完全性の検証

PRP を書く前に、**次の質問へ合格してください**:
_「このコードベースについて何も知らない人が、これを成功裏に実装するために必要なすべてを持っているか？」_

調査が不十分であれば、調査を継続してください。

### ステップ 2: テンプレートを確認

テンプレート構造として`PRPs/templates/prp_base.md`を使用 - 必要なすべてのセクションとフォーマットが含まれています。

### ステップ 3: リサーチ結果を PRP へと変換

リサーチ結果をテンプレートセクションに変換:

**目標セクション**: 調査を使用して、特定の測定可能な機能目標と具体的な成果物を定義
**コンテキストセクション**: リサーチ結果でテンプレートの YAML 構造を埋める - 特定の URL、ファイルパターン、注意点
**実装タスク**: コードベース分析からの情報密度の高いキーワードを使用して、依存関係順にタスクを作成
**検証ゲート**: このコードベースで動作することを確認したプロジェクト固有の検証コマンドを確認する

### ステップ 4: 情報密度基準

すべての参照が**具体的で実行可能**であることを確認:

- URL にはセクションアンカーを含め、ドメイン名だけでなく
- ファイル参照には従うべき特定のパターンを含める
- タスク仕様には正確な命名規則と配置を含める
- 検証コマンドはプロジェクト固有で実行可能

### ステップ 5: ULTRATHINK

リサーチ完了後、Todo ツールを使用して包括的な PRP 作成計画を作成:

- リサーチ結果で各テンプレートセクションを構成する方法を計画
- 追加リサーチが必要なギャップを特定
- 実行可能なコンテキストでテンプレートを埋めるための体系的なアプローチを作成

## 出力

保存先: `PRPs/todo/{feature-name}.md`

## PRP 品質チェック

### コンテキスト完全性チェック

- [ ] このコードベースについて何も知らない人が、これを成功裏に実装するために必要なすべてを持っていること
- [ ] すべての YAML 参照が具体的でアクセス可能
- [ ] 検証コマンドがプロジェクト固有で動作確認済み

### テンプレート構造準拠

- [ ] 目標セクションに特定の機能目標、成果物、成功定義がある
- [ ] 実装タスクが依存関係順に従う
- [ ] 最終検証チェックリストが包括的

### 情報密度基準

- [ ] すべてが具体的で実行可能であること
- [ ] URL に正確なガイダンスのためのセクションアンカーを含む
- [ ] タスク仕様がコードベースからの情報密度の高いキーワードを使用

## 作業ルール

**以下のルールは絶対に遵守してください:**

### 1. 憶測での作業の禁止

- **絶対に憶測で作業しないこと**
- 信頼できる情報源のみを使用すること:
  - ✅ 公式ドキュメント
  - ✅ 実際のコード
  - ✅ 実行ログ・エラーメッセージ
  - ✅ テスト結果
  - ❌ 推測や想像
  - ❌ 未確認の仮説

`context7` や `fetch` あるいは Web 検索を活用することで情報を収集すること

### 2. 不明点の調査義務

- **分からないことがある場合、実装を開始する前に必ず質問か調査をすること**
- 質問すべき状況:
  - 仕様が不明確な場合
  - エラーの原因が特定できない場合
  - 複数の実装方法があり、どれが適切か判断できない場合
  - 既存コードの意図が理解できない場合
  - 指示やドキュメントと要件に矛盾がある場合
- 調査すべき内容:
  - ライブラリの使い方が不明な場合
  - 実際の出力・入力インターフェースが不明な場合

## 成功指標

**信頼スコア**: 実装成功の可能性を 1-10 で評価

**検証**: 完成した PRP は、コードベースに不慣れな AI エージェントが、PRP の内容とコードベースアクセスのみを使用して機能を成功裏に実装できるようにする必要があります。
